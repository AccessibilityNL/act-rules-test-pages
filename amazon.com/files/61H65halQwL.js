(function(v){var m=window.AmazonUIPageJS||window.P,V=m._namespace||m.attributeErrors,D=V?V("VSERelatedVideosClientAssets",""):m;D.guardFatal?D.guardFatal(v)(D,window):D.execute(function(){v(D,window)})})(function(v,m,V){(function(){function D(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}function V(a,b,c){void 0===c&&(c="airyContainer");return'\x3cbody style\x3d"width:100%; height:100%; margin:0px;"\x3e\n    \x3cdiv id\x3d"'+
c+'" style\x3d"width:100%; height:100%"\x3e\x3c/div\x3e\n    \x3cscript crossorigin\x3d"anonymous"  src\x3d"'+a+'" onload\x3d"parent[\''+b+"'].resolve(Airy)\" onerror\x3d\"parent['"+b+"'].reject(event)\"\x3e\x3c/script\x3e\n    \x3c/body\x3e"}function Kb(a,b,c,d){void 0===d&&(d="airyContainer");return'\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+b+'" /\x3e\n    \x3cbody style\x3d"width:100%; height:100%; margin:0px;"\x3e\n    \x3cdiv id\x3d"'+d+'" style\x3d"width:100%; height:100%"\x3e\x3c/div\x3e\n    \x3cscript crossorigin\x3d"anonymous"  src\x3d"'+
a+'" onload\x3d"parent[\''+c+"'].resolve(Airy);\" onerror\x3d\"parent['"+c+"'].reject(event)\"\x3e\x3c/script\x3e\n    \x3c/body\x3e"}function Ga(){var a=document.createElement("iframe");a.className="vse-airy-container-frame";a.setAttribute("frameborder","0");a.setAttribute("scrolling","0");a.setAttribute("allowfullscreen","true");a.setAttribute("mozallowfullscreen","true");a.setAttribute("webkitallowfullscreen","true");return a}function Ha(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=
b(a[c],c,a);return e}function Ia(a,b){return a===b||a!==a&&b!==b}function ca(a,b){for(var c=a.length;c--;)if(Ia(a[c][0],b))return c;return-1}function F(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Q(a){if(null==a)return void 0===a?"[object Undefined]":"[object Null]";if(Ja&&Ja in Object(a)){var b=Lb.call(a,W),c=a[W];try{a[W]=void 0;var d=!0}catch(f){}var e=Mb.call(a);d&&(b?a[W]=c:delete a[W]);a=e}else a=Nb.call(a);return a}function G(a){var b=
typeof a;return null!=a&&("object"==b||"function"==b)}function Ka(a){if(!G(a))return!1;a=Q(a);return"[object Function]"==a||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a}function H(a){if(null!=a){try{return Ob.call(a)}catch(b){}return a+""}return""}function K(a,b){a=null==a?void 0:a[b];b=!G(a)||La&&La in a?!1:(Ka(a)?Pb:Qb).test(H(a));return b?a:void 0}function M(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function da(a,
b){a=a.__data__;var c=typeof b;return("string"==c||"number"==c||"symbol"==c||"boolean"==c?"__proto__"!==b:null===b)?a["string"==typeof b?"string":"hash"]:a.map}function A(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function I(a){this.size=(this.__data__=new F(a)).size}function ea(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new A;++b<c;)this.add(a[b])}function Rb(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function Ma(a,
b,c,d,e,f){var g=c&1,h=a.length,l=b.length;if(h!=l&&!(g&&l>h))return!1;if((l=f.get(a))&&f.get(b))return l==b;var l=-1,p=!0,k=c&2?new ea:void 0;f.set(a,b);for(f.set(b,a);++l<h;){var q=a[l],n=b[l];if(d)var u=g?d(n,q,l,b,a,f):d(q,n,l,a,b,f);if(void 0!==u){if(u)continue;p=!1;break}if(k){if(!Rb(b,function(b,a){if(!k.has(a)&&(q===b||e(q,b,c,d,f)))return k.push(a)})){p=!1;break}}else if(q!==n&&!e(q,n,c,d,f)){p=!1;break}}f["delete"](a);f["delete"](b);return p}function Sb(a){var b=-1,c=Array(a.size);a.forEach(function(a,
e){c[++b]=[e,a]});return c}function Tb(a){var b=-1,c=Array(a.size);a.forEach(function(a){c[++b]=a});return c}function Ub(a,b,c,d,e,f,g){switch(c){case "[object DataView]":if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer;b=b.buffer;case "[object ArrayBuffer]":if(a.byteLength!=b.byteLength||!f(new Na(a),new Na(b)))break;return!0;case "[object Boolean]":case "[object Date]":case "[object Number]":return Ia(+a,+b);case "[object Error]":return a.name==b.name&&a.message==b.message;
case "[object RegExp]":case "[object String]":return a==b+"";case "[object Map]":var h=Sb;case "[object Set]":h||(h=Tb);if(a.size!=b.size&&!(d&1))break;if(c=g.get(a))return c==b;d|=2;g.set(a,b);b=Ma(h(a),h(b),d,e,f,g);g["delete"](a);return b;case "[object Symbol]":if(na)return na.call(a)==na.call(b)}return!1}function Oa(a,b,c){b=b(a);if(!B(a)){a=c(a);c=-1;for(var d=a.length,e=b.length;++c<d;)b[e+c]=a[c]}return b}function Vb(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,
a)&&(f[e++]=g)}return f}function Wb(){return[]}function N(a){return null!=a&&"object"==typeof a}function Pa(a){return N(a)&&"[object Arguments]"==Q(a)}function Xb(){return!1}function oa(a,b){b=null==b?9007199254740991:b;return!!b&&("number"==typeof a||Yb.test(a))&&-1<a&&0==a%1&&a<b}function pa(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function Zb(a){return N(a)&&pa(a.length)&&!!r[Q(a)]}function $b(a){return function(b){return a(b)}}function qa(a){return null!=a&&pa(a.length)&&
!Ka(a)}function fa(a){if(qa(a)){var b=B(a),c=!b&&Qa(a),d=!b&&!c&&ra(a),e=!b&&!c&&!d&&Ra(a);if(b=b||c||d||e){for(var c=a.length,f=String,g=-1,h=Array(c);++g<c;)h[g]=f(g);c=h}else c=[];var f=c.length,l;for(l in a)!ac.call(a,l)||b&&("length"==l||d&&("offset"==l||"parent"==l)||e&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||oa(l,f))||c.push(l);a=c}else if(l=a&&a.constructor,a===("function"==typeof l&&l.prototype||bc)){l=[];for(d in Object(a))cc.call(a,d)&&"constructor"!=d&&l.push(d);a=l}else a=dc(a);
return a}function R(a,b,c,d,e){if(a===b)return!0;if(null==a||null==b||!N(a)&&!N(b))return a!==a&&b!==b;a:{var f=B(a),g=B(b),h=f?"[object Array]":Sa(a),l=g?"[object Array]":Sa(b),h="[object Arguments]"==h?"[object Object]":h,l="[object Arguments]"==l?"[object Object]":l,p="[object Object]"==h,g="[object Object]"==l;if((l=h==l)&&ra(a)){if(!ra(b)){b=!1;break a}f=!0;p=!1}if(l&&!p)e||(e=new I),b=f||Ra(a)?Ma(a,b,c,d,R,e):Ub(a,b,h,c,d,R,e);else{if(!(c&1)&&(f=p&&Ta.call(a,"__wrapped__"),h=g&&Ta.call(b,"__wrapped__"),
f||h)){a=f?a.value():a;b=h?b.value():b;e||(e=new I);b=R(a,b,c,d,e);break a}if(l)b:if(e||(e=new I),f=c&1,h=Oa(a,fa,Ua),g=h.length,l=Oa(b,fa,Ua).length,g==l||f){for(p=g;p--;){var k=h[p];if(!(f?k in b:ec.call(b,k))){b=!1;break b}}if((l=e.get(a))&&e.get(b))b=l==b;else{l=!0;e.set(a,b);e.set(b,a);for(var q=f;++p<g;){var k=h[p],n=a[k],u=b[k];if(d)var x=f?d(u,n,k,b,a,e):d(n,u,k,a,b,e);if(void 0===x?n!==u&&!R(n,u,c,d,e):!x){l=!1;break}q||(q="constructor"==k)}l&&!q&&(c=a.constructor,d=b.constructor,c!=d&&"constructor"in
a&&"constructor"in b&&!("function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)&&(l=!1));e["delete"](a);e["delete"](b);b=l}}else b=!1;else b=!1}}return b}function fc(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Object(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){var h=c[e],l=h[0],p=a[l],k=h[1];if(g&&h[2]){if(void 0===p&&!(l in a))return!1}else{h=new I;if(d)var q=d(p,k,l,a,b,h);if(void 0===q?!R(k,p,3,d,h):!q)return!1}}return!0}function gc(a){for(var b=
fa(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,e===e&&!G(e)]}return b}function Va(a,b){return function(c){return null==c?!1:c[a]===b&&(void 0!==b||a in Object(c))}}function hc(a){var b=gc(a);return 1==b.length&&b[0][2]?Va(b[0][0],b[0][1]):function(c){return c===a||fc(c,a,b)}}function ga(a){return"symbol"==typeof a||N(a)&&"[object Symbol]"==Q(a)}function sa(a,b){if(B(a))return!1;var c=typeof a;return"number"==c||"symbol"==c||"boolean"==c||null==a||ga(a)?!0:ic.test(a)||!jc.test(a)||null!=b&&a in
Object(b)}function ta(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new TypeError("Expected a function");var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);d=a.apply(this,d);c.cache=f.set(e,d)||f;return d};c.cache=new (ta.Cache||A);return c}function Wa(a){if("string"==typeof a)return a;if(B(a))return Ha(a,Wa)+"";if(ga(a))return Xa?Xa.call(a):"";var b=a+"";return"0"==b&&1/a==-kc?"-0":b}function Ya(a,b){return B(a)?a:sa(a,b)?[a]:lc(null==
a?"":Wa(a))}function ha(a){if("string"==typeof a||ga(a))return a;var b=a+"";return"0"==b&&1/a==-mc?"-0":b}function Za(a,b){b=Ya(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[ha(b[c++])];return c&&c==d?a:void 0}function nc(a,b){return sa(a)&&b===b&&!G(b)?Va(ha(a),b):function(c){var d;d=null==c?void 0:Za(c,a);d=void 0===d?void 0:d;var e;if(void 0===d&&d===b){if(d=null!=c){d=a;d=Ya(d,c);for(var f=-1,g=d.length,h=!1;++f<g;){e=ha(d[f]);if(!(h=null!=c&&null!=c&&e in Object(c)))break;c=c[e]}h||++f!=g?d=
h:(g=null==c?0:c.length,d=!!g&&pa(g)&&oa(e,g)&&(B(c)||Qa(c)))}e=d}else e=R(b,d,3);return e}}function ia(a){return a}function oc(a){return function(b){return null==b?void 0:b[a]}}function pc(a){return function(b){return Za(b,a)}}function $a(a){return"function"==typeof a?a:null==a?ia:"object"==typeof a?B(a)?nc(a[0],a[1]):hc(a):sa(a)?oc(ha(a)):pc(a)}function qc(a,b){var c=-1,d=qa(a)?Array(a.length):[];ab(a,function(a,f,g){d[++c]=b(a,f,g)});return d}function rc(a,b){return(B(a)?Ha:qc)(a,$a(b,3))}function ua(a,
b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function sc(a,b,c){b=bb(void 0===b?a.length-1:b,0);return function(){for(var d=arguments,e=-1,f=bb(d.length-b,0),g=Array(f);++e<f;)g[e]=d[b+e];e=-1;for(f=Array(b+1);++e<b;)f[e]=d[e];f[b]=c(g);return ua(a,this,f)}}function tc(a){return function(){return a}}function cb(a){var b=0,c=0;return function(){var d=uc(),e=16-(d-c);c=d;if(0<e){if(800<=
++b)return arguments[0]}else b=0;return a.apply(void 0,arguments)}}function X(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=va(a.prototype),b=a.apply(c,b);return G(b)?b:c}}function vc(a,
b,c){function d(){return(this&&this!==w&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=b&1,f=X(a);return d}function db(a,b,c,d){var e=-1,f=a.length,g=c.length,h=-1,l=b.length,p=wc(f-g,0),k=Array(l+p);for(d=!d;++h<l;)k[h]=b[h];for(;++e<g;)if(d||e<f)k[c[e]]=a[e];for(;p--;)k[h++]=a[e++];return k}function eb(a,b,c,d){var e=-1,f=a.length,g=-1,h=c.length,l=-1,p=b.length,k=xc(f-h,0),q=Array(k+p);for(d=!d;++e<k;)q[e]=a[e];for(k=e;++l<p;)q[k+l]=b[l];for(;++g<h;)if(d||e<f)q[k+c[g]]=a[e++];return q}
function wa(){}function S(a){this.__wrapped__=a;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function yc(){}function T(a,b){this.__wrapped__=a;this.__actions__=[];this.__chain__=!!b;this.__index__=0;this.__values__=void 0}function fb(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function ja(a){if(N(a)&&!B(a)&&!(a instanceof S)){if(a instanceof T)return a;if(zc.call(a,"__wrapped__")){if(a instanceof
S)a=a.clone();else{var b=new T(a.__wrapped__,a.__chain__);b.__actions__=fb(a.__actions__);b.__index__=a.__index__;b.__values__=a.__values__;a=b}return a}}return new T(a)}function Ac(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&!1!==b(a[c],c,a););return a}function Bc(a,b){Ac(Cc,function(c){var d="_."+c[0];if(c=b&c[1]){if(c=null==a?0:a.length){if(d===d)a:{c=-1;for(var e=a.length;++c<e;)if(a[c]===d)break a;c=-1}else a:{c=a.length;for(e=-1;++e<c;){var f=a[e];if(f!==f){c=e;break a}}c=-1}c=-1<c}c=!c}c&&
a.push(d)});return a.sort()}function gb(a,b,c){b+="";var d;d=(d=b.match(Dc))?d[1].split(Ec):[];c=Bc(d,c);if(d=c.length){var e=d-1;c[e]=(1<d?"\x26 ":"")+c[e];c=c.join(2<d?", ":" ");b=b.replace(Fc,"{\n/* [wrapped with "+c+"] */\n")}return hb(a,b)}function ib(a,b,c,d,e,f,g,h,l,p){var k=b&8;b=(b|(k?32:64))&~(k?64:32);b&4||(b&=-4);e=[a,b,e,k?f:void 0,k?g:void 0,k?void 0:f,k?void 0:g,h,l,p];c=c.apply(void 0,e);b:for(f=a.name+"",g=jb[f],h=Gc.call(jb,f)?g.length:0;h--;)if(l=g[h],p=l.func,null==p||p==a){f=
l.name;break b}g=ja[f];"function"==typeof g&&f in S.prototype?a===g?f=!0:(f=kb(g),f=!!f&&a===f[0]):f=!1;f&&lb(c,e);c.placeholder=d;return gb(c,a,b)}function Y(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];if(g===b||"__lodash_placeholder__"===g)a[c]="__lodash_placeholder__",f[e++]=c}return f}function xa(a,b,c,d,e,f,g,h,l,p){function k(){for(var t=arguments.length,y=Array(t),J=t;J--;)y[J]=arguments[J];if(x){var O=k.placeholder,U,J=y.length;for(U=0;J--;)y[J]===O&&++U}d&&(y=db(y,d,e,x));f&&
(y=eb(y,f,g,x));t-=U;if(x&&t<p)return O=Y(y,O),ib(a,b,xa,k.placeholder,c,y,O,h,l,p-t);O=n?c:this;J=u?O[a]:a;t=y.length;if(h){U=y.length;for(var v=Hc(h.length,U),Ic=fb(y);v--;){var mb=h[v];y[v]=oa(mb,U)?Ic[mb]:void 0}}else m&&1<t&&y.reverse();q&&l<t&&(y.length=l);this&&this!==w&&this instanceof k&&(J=r||X(J));return J.apply(O,y)}var q=b&128,n=b&1,u=b&2,x=b&24,m=b&512,r=u?void 0:X(a);return k}function Jc(a,b,c){function d(){for(var f=arguments.length,g=Array(f),h=f,l=d.placeholder;h--;)g[h]=arguments[h];
h=3>f&&g[0]!==l&&g[f-1]!==l?[]:Y(g,l);f-=h.length;return f<c?ib(a,b,xa,d.placeholder,void 0,g,h,void 0,void 0,c-f):ua(this&&this!==w&&this instanceof d?e:a,this,g)}var e=X(a);return d}function Kc(a,b,c,d){function e(){for(var b=-1,l=arguments.length,p=-1,k=d.length,q=Array(k+l),n=this&&this!==w&&this instanceof e?g:a;++p<k;)q[p]=d[p];for(;l--;)q[p++]=arguments[++b];return ua(n,f?c:this,q)}var f=b&1,g=X(a);return e}function Lc(a){if("number"==typeof a)return a;if(ga(a))return nb;G(a)&&(a="function"==
typeof a.valueOf?a.valueOf():a,a=G(a)?a+"":a);if("string"!=typeof a)return 0===a?a:+a;a=a.replace(Mc,"");var b=Nc.test(a);return b||Oc.test(a)?Pc(a.slice(2),b?2:8):Qc.test(a)?nb:+a}function ob(a){a?(a=Lc(a),a=a===pb||a===-pb?1.7976931348623157E308*(0>a?-1:1):a===a?a:0):a=0===a?a:0;var b=a%1;return a===a?b?a-b:a:0}function Rc(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function Sc(a,b,c,d){ab(a,function(a,f,g){b(d,a,c(a),g)});return d}var qb={queueComplete:!0},
ya=function(){function a(b,a,d){var e=this;this.player=b;this.frame=a;this.assets=[];this.currentIndex=0;this.eventEmitter=new d.EventEmitter;this.player.on("playbackComplete",function(){e.currentIndex++;e.doPlay()})}a.prototype.play=function(b){b?this.player.play(b):this.player.play();return this};a.prototype.resume=function(b){this.player.resume(b);return this};a.prototype.pause=function(){this.player.pause();return this};a.prototype.next=function(){this.player.stop();this.doPlay();return this};
a.prototype.previous=function(){this.player.stop();this.currentIndex--;this.doPlay();return this};a.prototype.seek=function(b){this.player.seek(b);return this};a.prototype.enqueue=function(b,a){void 0===a&&(a=this.assets.length);b instanceof Array?(b=b.slice(),b.splice(0,0,this.assets),Array.prototype.splice.apply(this.assets,b)):this.assets.splice(a,0,b);return this};a.prototype.dequeue=function(b){var a=this,d;if("number"===typeof b)d=[b];else if(b instanceof Array){var e=b.map(function(b){return b.contentId});
d=this.assets.map(function(b){return e.indexOf(b.contentId)}).filter(function(b){-1!=b})}else d=[this.assets.map(function(b,a){return a}).filter(function(d){a.assets[d].contentId==b.contentId})[0]];for(var f=0,g=d.length;f<g;f++)this.assets.splice(d[f],1);return this};a.prototype.on=function(b,a){if(qb.hasOwnProperty(b))this.eventEmitter.on(b,a);else this.player.on(b,a);return this};a.prototype.off=function(b,a){qb.hasOwnProperty(b)?this.eventEmitter.off(b,a):this.player.off(b,a);return this};a.prototype.onTime=
function(b,a,d){this.player.onTime(b,a,d);return this};a.prototype.offTime=function(b,a,d){this.player.offTime(b,a,d);return this};a.prototype.onAd=function(b,a){this.player.onAd(b,a);return this};a.prototype.offAd=function(b,a){this.player.offAd(b,a);return this};a.prototype.show=function(){return this};a.prototype.hide=function(){return this};a.prototype.getAssets=function(){return this.assets};a.prototype.getCurrentAssetIndex=function(){return this.currentIndex-1};a.prototype.getPosition=function(){return this.player.getPosition()};
a.prototype.isPlaying=function(){return this.player.isPlaying()};a.prototype.isPaused=function(){return this.player.isPaused()};a.prototype.getVersion=function(){return this.player.getVersion()};a.prototype.getFlashVersion=function(){return this.player.getFlashVersion()};a.prototype.getRendererType=function(){return this.player.getRendererType()};a.prototype.destroy=function(){var b=this;this.player.destroy();this.frame.style.display="none";setTimeout(function(){b.frame.parentNode.removeChild(b.frame)},
500)};a.prototype.doPlay=function(){var b=this.player.getCurrent();b?this.assets[this.currentIndex].contentId==b.contentId?this.player.play():this.player.play(this.assets[this.currentIndex]):this.assets[this.currentIndex]&&this.player.play(this.assets[this.currentIndex])};return a}(),za=function(){function a(b,a){var d=this;this.libs=a;this.commands=[];b.then(function(b){d.playerInstance=b;d.executeCommands()})}a.prototype.executeCommands=function(){for(var b=0;b<this.commands.length;b++)this.commands[b](this.playerInstance)};
a.prototype.play=function(b){this.playerInstance?this._play(b,this.playerInstance):this.commands.push(this.libs._partial(this._play,b));return this};a.prototype.pause=function(){this.playerInstance?this._pause(this.playerInstance):this.commands.push(this._pause);return this};a.prototype.resume=function(b){this.playerInstance?this._resume(this.playerInstance,b):this.commands.push(this.libs._partial(this.pause,b));return this};a.prototype.stop=function(){this.playerInstance?this._stop(this.playerInstance):
this.commands.push(this._stop);return this};a.prototype.seek=function(b){this.playerInstance?this._seek(b,this.playerInstance):this.commands.push(this.libs._partial(this._seek,b));return this};a.prototype.on=function(b,a){this.playerInstance?this._on(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._on,b,a));return this};a.prototype.off=function(b,a){this.playerInstance?this._off(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._off,b,a));return this};a.prototype.onTime=
function(b,a,d){this.playerInstance?this._onTime(b,a,d,this.playerInstance):this.commands.push(this.libs._partial(this._onTime,b,a,d));return this};a.prototype.offTime=function(b,a,d){this.playerInstance?this._offTime(b,a,d,this.playerInstance):this.commands.push(this.libs._partial(this._offTime,b,a,d));return this};a.prototype.onAd=function(b,a){this.playerInstance?this._onAd(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._onAd,b,a));return this};a.prototype.offAd=function(b,
a){this.playerInstance?this._offAd(b,a,this.playerInstance):this.commands.push(this.libs._partial(this._offAd,b,a));return this};a.prototype.getCurrent=function(){if(this.playerInstance)return this.playerInstance.getCurrent()};a.prototype.getPosition=function(){return this.playerInstance?this.playerInstance.getPosition():0};a.prototype.isPlaying=function(){return this.playerInstance?this.playerInstance.isPlaying():!1};a.prototype.isPaused=function(){return this.playerInstance?this.playerInstance.isPaused():
!1};a.prototype.getVersion=function(){return this.playerInstance?this.playerInstance.getVersion():""};a.prototype.getFlashVersion=function(){return this.playerInstance?this.playerInstance.getFlashVersion():""};a.prototype.getRendererType=function(){return this.playerInstance?this.playerInstance.getRendererType():""};a.prototype.destroy=function(){this.playerInstance&&this.playerInstance.destroy();this.playerInstance=null};a.prototype._play=function(b,a){b?a.play(b):a.play()};a.prototype._pause=function(b){b.pause()};
a.prototype._stop=function(b){b.stop()};a.prototype._resume=function(b,a){b.resume(a)};a.prototype._seek=function(b,a){a.seek(b)};a.prototype._on=function(b,a,d){d.on(b,a)};a.prototype._off=function(b,a,d){d.off(b,a)};a.prototype._onTime=function(b,a,d,e){e.onTime(b,a,d)};a.prototype._offTime=function(b,a,d,e){e.offTime(b,a,d)};a.prototype._onAd=function(b,a,d){d.onAd(b,a)};a.prototype._offAd=function(b,a,d){d.offAd(b,a)};a.prototype._destroy=function(b){b.destroy()};return a}(),Tc=function(){function a(b,
a,d,e){var f=this;this.libs=e;this.isFullScreen=!1;this.eventEmitter=new e.EventEmitter;this.currentAsset=d;this.initHandlers();a.bindings={ended:function(){return f.eventHandlers.onPlaybackComplete()},playing:function(){return f.eventHandlers.onPlaybackStart()},screenchange:function(){return f.eventHandlers.onScreenChange()},fullscreen:function(){return f.eventHandlers.onFullScreen()}};this.airy=b.embed(a);this.eventEmitter.emit("playerLoaded")}a.prototype.play=function(b){!b||this.currentAsset&&
b.contentId==this.currentAsset.contentId||(b.eventTimestamp||(b.eventTimestamp=Date.now()),this.airy.loadMedia({mediaSourceInfo:[b.videoUrl],contentId:b.contentId,vendorCode:b.vendorCode,eventTimestamp:b.eventTimestamp,slateImages:{preloadSlate:b.imageUrl?b.imageUrl:""}}),this.currentAsset=b);b?this.airy.play({eventTimestamp:b.eventTimestamp,isAsync:!0,contentId:b.contentId}):this.airy.play({isAsync:!0,contentId:this.currentAsset.contentId});return this};a.prototype.pause=function(){this.airy.pause();
return this};a.prototype.resume=function(b){b?this.airy.play({eventTimestamp:b,isAsync:!0}):this.airy.play({isAsync:!0});return this};a.prototype.stop=function(){this.airy.pause();this.currentAsset=void 0;return this};a.prototype.seek=function(b){this.airy.seek(b);return this};a.prototype.on=function(b,a){this.eventEmitter.on(b,a);return this};a.prototype.off=function(b,a){return this};a.prototype.onTime=function(b,a,d){return this};a.prototype.offTime=function(b,a,d){return this};a.prototype.onAd=
function(b,a){return this};a.prototype.offAd=function(b,a){return this};a.prototype.getCurrent=function(){return this.currentAsset};a.prototype.getPosition=function(){return 0};a.prototype.isPlaying=function(){return this.airy.isPlaying()};a.prototype.isPaused=function(){return!this.airy.isPlaying()};a.prototype.getVersion=function(){return"2"};a.prototype.getFlashVersion=function(){return""};a.prototype.getRendererType=function(){return this.airy.getRendererType()};a.prototype.destroy=function(){this.airy.detach();
this.airy.unbind("ended",this.eventHandlers.onPlaybackComplete);this.airy.unbind("playing",this.eventHandlers.onPlaybackStart);this.airy.unbind("screenchange",this.eventHandlers.onScreenChange);this.airy.unbind("fullscreen",this.eventHandlers.onFullScreen);this.airy=null};a.prototype.initHandlers=function(){var b=this;this.eventHandlers={onPlaybackComplete:function(){return b.player_onPlaybackComplete()},onPlaybackStart:function(){return b.player_onPlaybackStart()},onScreenChange:function(){return b.player_onScreenChange()},
onFullScreen:function(){return b.player_onFullScreen()}}};a.prototype.player_onPlaybackComplete=function(){var b=this.currentAsset;this.currentAsset=void 0;b&&(b.eventTimestamp=Date.now());this.eventEmitter.emit("playbackComplete",b)};a.prototype.player_onPlaybackStart=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackStart",this.currentAsset)};a.prototype.player_onScreenChange=function(){this.eventEmitter.emit("playerFullScreen",this.isFullScreen);
this.isFullScreen=!1};a.prototype.player_onFullScreen=function(){this.isFullScreen=!0};a.prototype.player_onPlaybackPause=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackPause",this.currentAsset)};return a}(),rb=function(){function a(){}a.prototype.createAiry2Frame=function(b){var a=Ga();b.container.appendChild(a);a.onload=function(){a.onload=null;a.contentWindow.document.open();a.contentWindow.document.write(Kb(b.airyScriptUrl,b.airyStyleUrl,
b.promiseName,"airyContainer"));a.contentWindow.document.close()};setTimeout(function(){if(a.onload)a.onload()});return a};a.prototype.createAiry3Frame=function(b){var a=Ga();b.container.appendChild(a);a.onload=function(){a.onload=null;a.contentWindow.document.open();a.contentWindow.document.write(V(b.airyScriptUrl,b.promiseName,"airyContainer"));a.contentWindow.document.close()};setTimeout(function(){if(a.onload)a.onload()});return a};return a}(),Uc=function(){function a(b){this.deps=b;this.loader=
new rb}a.prototype.create=function(b){var a=this,d="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/js/airy.ads."+(b.airyDebug?"debug.":"")+"js",e="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/css/beacon.css",f="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/css/aries._TTW_.css",g=D(),h=new this.deps.Promise(function(b,a){m[g]={resolve:b,reject:a}}),d=this.loader.createAiry2Frame({airyScriptUrl:d,
airyStyleUrl:b.usePseudoFullscreen?f:e,container:b.container||document.getElementById(b.containerId),promiseName:g}),h=h.then(function(d){var e="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+b.airy2Version+"/skins/aries._TTW_.js",f=b.videoAds;f.isEngineEnabled=b.videoAds.isEngineEnabled;e={contentId:""+b.initialVideo.contentId,customerId:b.customerId,desiredMode:b.desiredMode||"hybrid",disabledViewIds:b.disabledViewIds,foresterMetadataParams:{client:b.requestMetadata.clientId,
marketplaceId:b.requestMetadata.marketplaceId,method:b.requestMetadata.method,requestId:b.requestMetadata.requestId,session:b.requestMetadata.sessionId},mediaRequiresUserAction:b.mediaRequiresUserAction,mediaSourceInfo:[""+b.initialVideo.videoUrl],pageAsin:b.requestMetadata.pageAsin,parentId:"airyContainer",persistControlsDuringAdUX:b.persistControlsDuringAdUX,skinUrl:b.usePseudoFullscreen?e:"",usePseudoFullscreen:b.usePseudoFullscreen,vendorCode:b.initialVideo.vendorCode,videoAds:f};b.initialVideo.imageUrl&&
(e.slateImages={preloadSlate:b.initialVideo.imageUrl});b.supportsInlinePlayback&&(e.supportsInlinePlayback=b.supportsInlinePlayback);b.eventTimestamp&&(e.eventTimestamp=b.eventTimestamp);b.requestMetadata.instance&&(e.foresterMetadataParams.instance=b.requestMetadata.instance);return new Tc(d,e,b.initialVideo,a.deps)});return new ya(new za(h,this.deps),d,this.deps)};return a}(),Vc=function(){function a(b,a,d,e){var f=this;this.libs=e;this.eventEmitter=new e.EventEmitter;this.currentAsset=d;this.initHandlers();
a.bindings={ended:function(){return f.eventHandlers.onPlaybackComplete()},playing:function(){return f.eventHandlers.onPlaybackStart()}};this.airy=b.embed(a);this.eventEmitter.emit("playerLoaded")}a.prototype.play=function(b){!b||this.currentAsset&&b.contentId==this.currentAsset.contentId||(this.airy.loadMedia({contentId:b.contentId,vendorCode:b.vendorCode}),this.currentAsset=b);b&&b.eventTimestamp?this.airy.play({contentId:b.contentId,eventTimestamp:b.eventTimestamp}):this.airy.play();return this};
a.prototype.pause=function(){return this};a.prototype.resume=function(b){return this};a.prototype.stop=function(){this.pause();this.currentAsset=void 0;return this};a.prototype.seek=function(b){return this};a.prototype.on=function(b,a){this.eventEmitter.on(b,a);return this};a.prototype.off=function(b,a){this.eventEmitter.off(b,a);return this};a.prototype.onTime=function(b,a,d){return this};a.prototype.offTime=function(b,a,d){return this};a.prototype.onAd=function(b,a){return this};a.prototype.offAd=
function(b,a){return this};a.prototype.getCurrent=function(){return this.currentAsset};a.prototype.getPosition=function(){return 0};a.prototype.isPlaying=function(){return!0};a.prototype.isPaused=function(){return!1};a.prototype.getVersion=function(){return"3"};a.prototype.getFlashVersion=function(){return""};a.prototype.getRendererType=function(){return""};a.prototype.destroy=function(){this.airy.unbind("ended",this.eventHandlers.onPlaybackComplete);this.airy.unbind("playing",this.eventHandlers.onPlaybackStart);
this.airy.detach()};a.prototype.initHandlers=function(){var b=this;this.eventHandlers={onPlaybackComplete:function(){return b.player_onPlaybackComplete()},onPlaybackStart:function(){return b.player_onPlaybackStart()}}};a.prototype.player_onPlaybackComplete=function(){var b=this.currentAsset;this.currentAsset=void 0;b&&(b.eventTimestamp=Date.now());this.eventEmitter.emit("playbackComplete",b)};a.prototype.player_onPlaybackStart=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());
this.eventEmitter.emit("playbackStart",this.currentAsset)};a.prototype.player_onPlaybackPause=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackPause",this.currentAsset)};return a}(),Wc=function(){function a(b){this.deps=b;this.loader=new rb}a.prototype.create=function(b){var a=this,d=D(),e=new this.deps.Promise(function(b,a){m[d]={resolve:b,reject:a}}),f=this.loader.createAiry3Frame({airyScriptUrl:b.airy3ScriptUrl||"https://d2tz3plrpnfrv0.cloudfront.net/airy/prod/latest/airy.min.js",
container:b.container||document.getElementById(b.containerId),promiseName:d}),e=e.then(function(d){var e=b.videoAds;e.isEngineEnabled=b.videoAds.isEngineEnabled;e={disabledViewIds:b.disabledViewIds,parentId:"airyContainer",foresterMetadataParams:{client:b.requestMetadata.clientId,marketplaceId:b.requestMetadata.marketplaceId,method:b.requestMetadata.method,requestId:b.requestMetadata.requestId,session:b.requestMetadata.sessionId},videoAds:e,bindings:{},contentId:""+b.initialVideo.contentId,pageAsin:b.requestMetadata.pageAsin,
avPlayerAssetUrl:"https://avodassets-a.akamaihd.net/playback/web_player/webplayer.js"};b.customerId&&"0"!=b.customerId&&(e.customerId=b.customerId);return new Vc(d,e,b.initialVideo,a.deps)});return new ya(new za(e,this.deps),f,this.deps)};return a}(),Xc=function(){function a(b,a,d,e){var f=this;this.libs=e;this.eventEmitter=new e.EventEmitter;this.currentAsset=d;this.initHandlers();d=document.getElementById(a.parentId);e=document.createElement("video");var g=a.parentId+"-element";e.id=g;e.className=
"video-js";e.setAttribute("playsinline","true");a.shouldDisableControls||e.setAttribute("controls","true");a.shouldAutoplay&&e.setAttribute("autoplay","true");a.shouldStartMuted&&e.setAttribute("muted","true");d.appendChild(e);this.videoJS=b.embed(g,a);document.getElementById(g).setAttribute("style","width:100%; height:100%;");this.videoJS.src(a.mediaSourceInfo[0]);this.vseMetrics=b.metrics(this.videoJS);this.vseAds=b.ads(this.videoJS);this.videoJS.ready(function(){f.videoJS.on("ended",function(){f.eventHandlers.onPlaybackComplete()});
f.videoJS.on("playing",function(){f.eventHandlers.onPlaybackStart()});f.eventEmitter.emit("playerLoaded")})}a.prototype.play=function(b){!b||this.currentAsset&&b.contentId==this.currentAsset.contentId||(this.vseMetrics.setContentId(b.contentId),this.vseAds.setContentId(b.contentId),this.vseAds.setVendorCode(b.vendorCode),this.videoJS.src(b.videoUrl),this.currentAsset=b);b=b&&b.eventTimestamp?b.eventTimestamp:Date.now();this.vseMetrics.setPageLoadStartTimestamp(b);this.videoJS.play();return this};
a.prototype.pause=function(){this.videoJS.pause();return this};a.prototype.resume=function(b){this.videoJS.play();return this};a.prototype.seek=function(b){this.videoJS.currentTime(b);return this};a.prototype.stop=function(){this.videoJS.pause();this.currentAsset=void 0;return this};a.prototype.on=function(b,a){this.eventEmitter.on(b,a);return this};a.prototype.off=function(b,a){return this};a.prototype.onTime=function(b,a,d){return this};a.prototype.offTime=function(b,a,d){return this};a.prototype.onAd=
function(b,a){return this};a.prototype.offAd=function(b,a){return this};a.prototype.getCurrent=function(){return this.currentAsset};a.prototype.getPosition=function(){return this.videoJS.currentTime()};a.prototype.isPlaying=function(){return!this.videoJS.paused()};a.prototype.isPaused=function(){return this.videoJS.paused()};a.prototype.getVersion=function(){return"VJS"};a.prototype.getFlashVersion=function(){return""};a.prototype.getRendererType=function(){return""};a.prototype.destroy=function(){this.vseMetrics.publishBeforeDispose();
this.videoJS.off("ended",this.eventHandlers.onPlaybackComplete);this.videoJS.dispose();this.videoJS=null};a.prototype.initHandlers=function(){var b=this;this.eventHandlers={onPlaybackComplete:function(){return b.player_onPlaybackComplete()},onPlaybackStart:function(){return b.player_onPlaybackStart()}}};a.prototype.player_onPlaybackComplete=function(){if(!this.vseAds.isAdPlaying()){var b=this.currentAsset;this.currentAsset=void 0;b&&(b.eventTimestamp=Date.now());this.eventEmitter.emit("playbackComplete",
b)}};a.prototype.player_onPlaybackStart=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackStart",this.currentAsset)};return a}(),Yc=function(){function a(b){this.deps=b}a.prototype.create=function(b){var a=this,d=D(),e=new this.deps.Promise(function(b,a){m[d]={resolve:b,reject:a}});v.when("brila").execute("construct-player",function(b){m[d].resolve(b)});var f=document.getElementById(b.containerId),g=b.containerId+"-container";f.innerHTML='\x3cdiv id\x3d"'+
g+'" style\x3d"width:100%; height:100%"\x3e\x3c/div\x3e';e=e.then(function(d){var e={contentId:""+b.initialVideo.contentId,customerId:b.customerId,foresterMetadataParams:{client:b.requestMetadata.clientId,marketplaceId:b.requestMetadata.marketplaceId,method:b.requestMetadata.method,requestId:b.requestMetadata.requestId,session:b.requestMetadata.sessionId},mediaSourceInfo:[""+b.initialVideo.videoUrl],pageAsin:b.requestMetadata.pageAsin,parentId:g,vendorCode:b.initialVideo.vendorCode,videoAds:b.videoAds,
shouldStartMuted:b.shouldStartMuted,shouldAutoplay:b.shouldAutoplay,shouldDisableControls:b.shouldDisableControls};b.eventTimestamp&&(e.eventTimestamp=b.eventTimestamp);return new Xc(d,e,b.initialVideo,a.deps)});return new ya(new za(e,this.deps),document.getElementById(g),this.deps)};return a}(),Zc=function(){function a(b){this.deps=b;this.a2factory=new Uc(b);this.a3factory=new Wc(b);this.brilafactory=new Yc(b)}a.prototype.create=function(b){switch(b.airyVersion){default:b=this.a2factory.create(b);
break;case "3":b=this.a3factory.create(b);break;case "VideoJS":b=this.brilafactory.create(b)}return b};return a}();m.vseFeatures=m.vseFeatures||{};var sb=m.gatedP||{register:function(a,b,c,d,e){void 0===e&&(e=m.vseFeatures);v.now(a).execute(a+"-prereg",function(f){f||e[b]||(e[b]=!0,d.resolve(c(d)).then(function(){v.now(a).execute(a+"-reg",function(c){c||(v.log("Gated registration failed to register module!","ERROR",a),e[b]=!1)})}))})},declare:function(a,b,c,d){void 0===d&&(d=m.vseFeatures);v.now(a).execute(a+
"-prereg",function(e){e||d[b]||(d[b]=!0,v.declare(a,c))})}},C={count:function(a,b){var c=m.ue;c&&c.count("vse:csm:"+a,b)},emitSushiMetric:function(a,b,c){var d=this;b=b||"https://unagi-na.amazon.com/1/events/com.amazon.eel.vse.metricstest.nexus";c=c||0;if(!(3<=c)){var e={params:JSON.stringify(a).replace(/\\\\/g,""),paramsFormat:"json",contentType:"application/json; charset\x3dutf-8",error:function(){d.emitSushiMetric(a,b,++c)}};v.when("A").execute("Emit-VSE-Metrics",function(a){a.post(b,e)})}}},z=
function(){function a(){}a.INSTANCE="vse-featured-products";a.PLACEMENT="rvp:videolightbox";a.PREFIX=a.INSTANCE+":"+a.PLACEMENT;a.TIME=a.PREFIX+":totalTime";a.SUCCESS_TIME=a.PREFIX+":success:totalTime";a.ERROR_TIME=a.PREFIX+":error:totalTime";a.REQUEST=a.PREFIX+":request";a.SUCCESS=a.PREFIX+":success";a.ERROR=a.PREFIX+":error";a.TIMEOUT=a.PREFIX+":timeout";a.IMPRESSION=a.PREFIX+":impression";a.CLICK=a.PREFIX+":click";a.SIZE=a.PREFIX+":size";a.TIMEOUT_STATUS="timeout";return a}(),$c=function(a,b){return b=
{exports:{}},a(b,b.exports),b.exports}(function(a){function b(){}function c(b,a,c){this.fn=b;this.context=a;this.once=c||!1}function d(){this._events=new b;this._eventsCount=0}var e=Object.prototype.hasOwnProperty,f="~";Object.create&&(b.prototype=Object.create(null),(new b).__proto__||(f=!1));d.prototype.eventNames=function(){var b=[],a,c;if(0===this._eventsCount)return b;for(c in a=this._events)e.call(a,c)&&b.push(f?c.slice(1):c);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(a)):
b};d.prototype.listeners=function(b,a){b=this._events[f?f+b:b];if(a)return!!b;if(!b)return[];if(b.fn)return[b.fn];a=0;for(var c=b.length,d=Array(c);a<c;a++)d[a]=b[a].fn;return d};d.prototype.emit=function(b,a,c,d,e,q){var n=f?f+b:b;if(!this._events[n])return!1;var n=this._events[n],u=arguments.length,x,m;if(n.fn){n.once&&this.removeListener(b,n.fn,void 0,!0);switch(u){case 1:return n.fn.call(n.context),!0;case 2:return n.fn.call(n.context,a),!0;case 3:return n.fn.call(n.context,a,c),!0;case 4:return n.fn.call(n.context,
a,c,d),!0;case 5:return n.fn.call(n.context,a,c,d,e),!0;case 6:return n.fn.call(n.context,a,c,d,e,q),!0}m=1;for(x=Array(u-1);m<u;m++)x[m-1]=arguments[m];n.fn.apply(n.context,x)}else{var r=n.length,t;for(m=0;m<r;m++)switch(n[m].once&&this.removeListener(b,n[m].fn,void 0,!0),u){case 1:n[m].fn.call(n[m].context);break;case 2:n[m].fn.call(n[m].context,a);break;case 3:n[m].fn.call(n[m].context,a,c);break;case 4:n[m].fn.call(n[m].context,a,c,d);break;default:if(!x)for(t=1,x=Array(u-1);t<u;t++)x[t-1]=arguments[t];
n[m].fn.apply(n[m].context,x)}}return!0};d.prototype.on=function(b,a,d){a=new c(a,d||this);b=f?f+b:b;this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],a]:this._events[b].push(a):(this._events[b]=a,this._eventsCount++);return this};d.prototype.once=function(b,a,d){a=new c(a,d||this,!0);b=f?f+b:b;this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],a]:this._events[b].push(a):(this._events[b]=a,this._eventsCount++);return this};d.prototype.removeListener=function(a,c,
d,e){a=f?f+a:a;if(!this._events[a])return this;if(!c)return 0===--this._eventsCount?this._events=new b:delete this._events[a],this;var k=this._events[a];if(k.fn)k.fn!==c||e&&!k.once||d&&k.context!==d||(0===--this._eventsCount?this._events=new b:delete this._events[a]);else{for(var m=0,n=[],u=k.length;m<u;m++)(k[m].fn!==c||e&&!k[m].once||d&&k[m].context!==d)&&n.push(k[m]);n.length?this._events[a]=1===n.length?n[0]:n:0===--this._eventsCount?this._events=new b:delete this._events[a]}return this};d.prototype.removeAllListeners=
function(a){a?(a=f?f+a:a,this._events[a]&&(0===--this._eventsCount?this._events=new b:delete this._events[a])):(this._events=new b,this._eventsCount=0);return this};d.prototype.off=d.prototype.removeListener;d.prototype.addListener=d.prototype.on;d.prototype.setMaxListeners=function(){return this};d.prefixed=f;d.EventEmitter=d;"undefined"!==typeof a&&(a.exports=d)}).EventEmitter,ad=function(){function a(b,a){void 0===a&&(a={refTagRecorderEndPoint:"/gp/mobile/tag/",retryLimit:3});this.A=b;this.config=
a}a.prototype.emitRefTag=function(b,a){void 0===a&&(a=0);if(!(a>=this.config.retryLimit)){var d=this;this.A.post(this.config.refTagRecorderEndPoint+"ref\x3d"+b,{error:function(){d.emitRefTag(b,a++)}})}};return a}(),bd=function(){function a(b,a,d,e,f){var g=this;this.carouselFramework=a;this.A=d;this.contentCarouselConfig=e;this.deps=f;this.vseAssets=[];this.carouselPageSize=0;this.carouselPageNumber=1;var h=d.$;this.activeCard=h([]);var l=this;this.auiCarousel=b;this.refTagRecorder=new ad(d);h("#"+
e.carouselName).find(".a-carousel-heading").after(h("#"+e.carouselName).find(".vse-upload-link").removeClass("aok-hidden"));h("#"+e.carouselName+" .vse-video-item").each(function(){l.vseAssets.push(l.getAssetSpec(h(this)))});this.vseAssetIndex=this.deps._keyBy(this.vseAssets,"contentId");h("#"+e.carouselName).delegate(".a-carousel-card a","click",function(b){if(!h(this).closest("li").hasClass("active")){var a=l.vseAssetIndex[h(this).closest("li").find(".vse-video-item").data("asin")];l.markPlaying(a);
a.eventTimestamp=Date.now();d.trigger("vse:contentCarousel:"+e.carouselName+":click",a);a=l.findIndex(a);l._emitRefTag(a,l.contentCarouselConfig.refTagPrefix)}b.preventDefault()});h("#"+e.carouselName+" .vse-carousel-item").each(function(b){var a=h(this);a.attr("href",a.data("redirect-url")+"?ref\x3d"+l.contentCarouselConfig.refTagPrefix+b)});d.off("a:carousel:"+e.carouselName+":change:pageSize");d.off("a:carousel:"+e.carouselName+":change:pageNumber");d.on("a:carousel:"+e.carouselName+":change:pageSize",
function(){g.carouselPageSize=g.auiCarousel.getAttr("pageSize");g.activeAsset&&g.rotateTo(g.activeAsset)});d.on("a:carousel:"+e.carouselName+":change:pageNumber",function(){g.carouselPageNumber=g.auiCarousel.getAttr("pageNumber");d.trigger("a:carousel:"+e.carouselName+":getCarouselPageNumber",g.carouselPageNumber)})}a.prototype.getplaylist=function(){return this.vseAssets.slice()};a.prototype.getActiveAsset=function(){return this.activeAsset};a.prototype.scrollTo=function(){this.A.$("#"+this.contentCarouselConfig.carouselName).animate({scrollTop:this.activeCard.offset().top-
this.A.$("#"+this.contentCarouselConfig.carouselName).offset().top+this.A.$("#"+this.contentCarouselConfig.carouselName).scrollTop()})};a.prototype.rotateTo=function(b){this.markPlaying(b);this.contentCarouselConfig.isVerticalScroll&&this.scrollTo();0!==this.carouselPageSize&&(b=this.findIndex(b),-1!==b&&(b=Math.floor(b/this.carouselPageSize)+1,this.carouselPageNumber!=b&&this.auiCarousel.gotoPage(b)))};a.prototype.changeStartingCardTo=function(b){var a=this;this.listOffset=this.findIndex(b);if(!this.contentCarouselConfig.isVerticalScroll){this.carouselFramework.initializeAll();
this.carouselFramework.onInit(""+this.contentCarouselConfig.carouselName,function(){a.rotateTo(b)});var d=this;this.A.$("#"+this.contentCarouselConfig.carouselName+" .vse-carousel-item").each(function(b){var a=d.A.$(this);b=(b-d.listOffset+d.vseAssets.length)%d.vseAssets.length;a.attr("href",a.data("redirect-url")+"?ref\x3d"+d.contentCarouselConfig.refTagPrefix+b)})}};a.prototype.markPlaying=function(b){this.activeAsset=b;this.activeCard.removeClass("active");this.activeCard=this.vseAssetIndex[b.contentId].$el.closest("li").addClass("active")};
a.prototype.findIndex=function(b){return this.vseAssets.indexOf(this.vseAssetIndex[b.contentId])};a.prototype._emitRefTag=function(b,a){0<this.listOffset&&(b=(b-this.listOffset+this.vseAssets.length)%this.vseAssets.length);this.refTagRecorder.emitRefTag(a+b)};a.prototype.destroy=function(){this.A.$("#"+this.contentCarouselConfig.carouselName+" .a-carousel-card.active").removeClass("active")};a.prototype.getAssetSpec=function(b){var a=b.data(),d=b.find(".vse-video-image").data("img"),d=d.replace("SR160,90_BG0,0,0_PKvse-overlay-play2",
"").replace("SR320,180_BG0,0,0_PKvse-overlay-play2","");return{contentId:a.asin,title:a.title,vendorName:a.vendorName,vendorCode:a.vendorCode,referenceUrl:a.referenceUrl,referenceLinkTitle:a.referenceTitle,videoUrl:a.videoUrl,$el:b,duration:a.duration,imageUrl:d,sponsored:a.sponsored}};return a}(),cd=function(){return function(a){this.name="InvalidArugmentsException";this.message=a}}(),dd=function(){function a(a,c,d){this.carouselFramework=a;this.A=c;this.deps=d}a.prototype.create=function(a){var c=
this.carouselFramework.getCarousel(this.A.$("#"+a.carouselName));if(!c)throw new cd("Carousel framework can not find carousel by the name of "+a.carouselName+".");return new bd(c,this.carouselFramework,this.A,a,this.deps)};return a}(),ed=function(){function a(a,c,d,e,f,g){var h=this;this.wrapper=a;this.useSecondaryView=c;this.$=d;this.A=e;this.productCarouselId=f;this.showProductCarousel=g;this.title=this.wrapper.find(".vse-content-title");this.titlePrefix=this.wrapper.find(".vse-content-title-prefix");
this.referenceLink=this.wrapper.find("#vse-customer-review-link");this.activeVideoTitle=this.wrapper.find(".vse-active-video-heading");this.activeVideoTitlePrefix=this.wrapper.find("#vse-activevideo-crv-prefix");this.activeVideoReferenceLink=this.wrapper.find("#vse-activevideo-crv-link");this.activeVideoVendorName=this.wrapper.find(".vse-active-video-vendorName");this.activeVideoSponsored=this.wrapper.find(".vse-active-video-sponsored");this.lbVideoCarousel=this.wrapper.find(".vse-related-videos-container");
this.playerAndActiveVideoContainer=this.wrapper.find(".vse-fixedLayout");g&&void 0!==f&&(this.productFeaturedCarousel=this.wrapper.find("#"+f));this.activeVideoCustomerProfile=this.wrapper.find("#vse-active-video-customer-profile");this.feedbackTrigger=this.wrapper.find(".vse-feedback-trigger");e.on("resize",function(){c&&h.updateVerticalScrollHeight()})}a.prototype.updateProductCarouselDOM=function(a){return"undefined"!=typeof this.showProductCarousel&&this.showProductCarousel&&"undefined"!=typeof a&&
""!==a?this.productFeaturedCarousel?(this.productFeaturedCarousel.css({opacity:"0"}).html(a).animate({opacity:"1"},650),0<this.productFeaturedCarousel.has("ol").has("li").length):!1:!1};a.prototype.getProductCarouselSize=function(){return"undefined"!=typeof this.showProductCarousel&&this.showProductCarousel?this.productFeaturedCarousel?this.productFeaturedCarousel.has("ol").has("li").length:0:0};a.prototype.update=function(a,c){this.updateActiveVideo(a);this.updateTitle(a,c)};a.prototype.updateActiveVideo=
function(b){var c=this._isCustomerReviewVideo(b);this.activeVideoTitle.text(b.title);this.activeVideoVendorName.text(b.vendorName);b.sponsored?this.activeVideoSponsored.removeClass("vse-invisible"):this.activeVideoSponsored.addClass("vse-invisible");var d=this.lbVideoCarousel.find("[data-asin\x3d"+b.contentId+"]").find(".vse-video-customer-profile");0<d.length?(this.activeVideoCustomerProfile.html(d.clone().removeClass("vse-hidden").html()),this.activeVideoVendorName.addClass("vse-hidden"),this.productFeaturedCarousel||
this.feedbackTrigger.addClass("vse-profile-height")):(this.activeVideoCustomerProfile.html(""),this.activeVideoVendorName.removeClass("vse-hidden"),this.feedbackTrigger.removeClass("vse-profile-height"));this.useSecondaryView&&(this.adjustLBPosition(),this.updateVerticalScrollHeight());this.activeVideoTitlePrefix.text(a.prefixes[+c]);this.activeVideoReferenceLink.attr("href",b.referenceUrl||"");this.activeVideoReferenceLink.text(b.title);c?(this.activeVideoReferenceLink.text("Customer Review: "+b.title),
this.activeVideoTitle.addClass("vse-invisible"),this.activeVideoReferenceLink.removeClass("vse-invisible")):(this.activeVideoTitle.removeClass("vse-invisible"),this.activeVideoReferenceLink.addClass("vse-invisible"))};a.prototype.updateTitle=function(b,c){this.title=this.$(".vse-content-title");this.useSecondaryView?this.title.text(c):(this.title.text(b.title),this.title.attr("title",b.title));this.useSecondaryView||(this.titlePrefix=this.$(".vse-content-title-prefix"),this.titlePrefix.text(a.prefixes[+this._isCustomerReviewVideo(b)]));
c=this._isCustomerReviewVideo(b);this.referenceLink.attr("href",b.referenceUrl||"");this.referenceLink.text(b.referenceLinkTitle||"");c?this.referenceLink.removeClass("vse-invisible"):this.referenceLink.addClass("vse-invisible")};a.prototype.adjustLBPosition=function(){this.lbHeaderElement=this.$(".vse-lightbox-header").closest(".a-popover-header-secondary");var a=this.lbHeaderElement.height(),c=this.playerAndActiveVideoContainer.height();this.playerAndActiveVideoContainer.css("top",a);this.lbVideoCarousel.css("top",
a+c)};a.prototype._isCustomerReviewVideo=function(a){return"AOD60"==a.vendorCode};a.prototype.updateVerticalScrollHeight=function(){this.lbVideoCarousel.css({"max-height":this.$(m).height()-(this.playerAndActiveVideoContainer.height()+this.$(".vse-lightbox-wrapper .a-popover-header-secondary").height())})};a.prototype.hideShareIcons=function(a){this.$("#"+a+"-popover").slideUp(200)};a.prototype.showShareIcons=function(a){this.$("#"+a+"-popover").slideDown(200)};a.prefixes=["","Customer Review: "];
return a}(),fd=function(){function a(a){var c=this;this.config=a;this._errorCallback=function(a){c.config.A.trigger("vse:feedback:"+c.config.feedbackId+"-submit:failed",a)};this._successCallback=function(a){c.config.A.trigger("vse:feedback:"+c.config.feedbackId+"-submit:succeeded",a)};this.config.bottomSheetFactory&&this._getAndSetBottomSheetInstance();this.feedbackInstance=a.feedback;a.feedbackId&&(a.A.on("vse:feedback:"+a.feedbackId+":showSection",function(){c._changeHeight(525)}),a.A.on("vse:feedback:"+
a.feedbackId+":reset",function(){c._changeHeight(300)}),a.A.declarative(a.feedbackId+"-show-options","click",function(c){c.$target.hasClass("active")?a.A.trigger("vse:feedback:"+a.feedbackId+"-show-options:close"):a.A.trigger("vse:feedback:"+a.feedbackId+"-show-options:show");c.$target.toggleClass("active")}))}a.prototype.show=function(){this._getAndSetBottomSheetInstance()?this.bottomSheetInstance.show():this._slide("DOWN");return this};a.prototype.hide=function(){var a=this;this._getAndSetBottomSheetInstance()?
setTimeout(function(){a.bottomSheetInstance.hide()},350):this._slide("UP");return this};a.prototype.reset=function(){this.feedbackInstance&&this.feedbackInstance.reset();return this};a.prototype.submit=function(a){this.config.feedbackEndpoint?this.config.A.$.ajax({url:this.config.feedbackEndpoint,data:JSON.stringify({events:[{data:{feedback:a}}]}),type:"POST",contentType:"application/json; charset\x3dutf-8",error:this._errorCallback,success:this._successCallback}):this.config.A.post("/vap/videoFeedback",
{params:a,error:this._errorCallback,success:this._successCallback});this.hide();return this};a.prototype._slide=function(a){"UP"===a?this.config.A.$("#"+this.config.feedbackId+"-popover").toggleClass("show-form").slideUp(200):this.config.A.$("#"+this.config.feedbackId+"-popover").toggleClass("show-form").slideDown(200)};a.prototype._changeHeight=function(a){this._getAndSetBottomSheetInstance()&&this.bottomSheetInstance.changeHeight({duration:.2,height:a})};a.prototype._getAndSetBottomSheetInstance=
function(){if(this.config.bottomSheetFactory)return this.bottomSheetInstance?this.bottomSheetInstance:this.bottomSheetInstance=this.config.bottomSheetFactory.get(this.config.feedbackId+"-sheet")};return a}(),gd=function(){function a(a){var c=this;this.config=a;this.playbackCompleteHandler=function(a){return c.onPlaybackComplete(a)};this.playerFullScreenHandler=function(a){return c.onPlayerFullScreen(a)};this.playerLoadedHandler=function(){return c.config.popover.updatePosition()};this.isContinousPlayFinished=
this.socialShareIsOpen=this.feedbackIsOpen=this.lightboxPausedVideo=!1;this.lightBoxPopoverClass="vse-lightbox-wrapper";this.productCarouselHtmlList=[];this.productCarouselInitList=[];this.isToggledToCollapse=this.doRecordProductMetrics=this.isSingleVideoCarousel=!1;this.dom=new ed(a.$("#"+a.popoverName+"-wrapper"),!!a.useSecondaryView,a.$,a.A,a.productCarouselId,a.showProductCarousel);this.feedback=new fd(a);a.mShop&&a.mShopFactory&&(a.mShopFactory.addEventListener("appPause",function(){c.pauseVideoIfNeeded()}),
a.mShopFactory.addEventListener("appResume",function(){c.resumeVideoIfNeeded()}));a.$(".vse-scrolltotop ").click(function(){a.$(".vse-vertical-scroll").animate({scrollTop:0},300)});a.$(document).delegate("#"+a.popoverTriggerId,"click",function(a){return a.preventDefault()});a.A.on("a:popover:beforeHide:"+a.popoverName,function(d){c.config.mShop&&c.config.mShopFactory&&!c.config.showHeaderBar&&(c.config.mShopFactory.cancelFullscreen(),c.config.mShopFactory.dispatchEvent({type:"appOverlays.Show"}));
c.feedbackIsOpen&&c.config.A.$("#"+c.config.feedbackId+"-trigger").removeClass("active");c.feedback.hide();a.A.trigger("vse:feedback:"+a.feedbackId+"-show-options:close");c.config.showShareWidget&&(c.socialShareIsOpen&&c.config.A.$("#"+c.config.socialShareId+"-trigger").removeClass("active"),c.dom.hideShareIcons(a.socialShareId),a.A.trigger("vse:socialShare:"+a.socialShareId+"-show-icons:close"));c.hide()});a.A.on("a:popover:afterShow:"+a.popoverName,function(d){c.config.A.$(d.popover.$popover).addClass("vse-lightbox-wrapper "+
a.A.$("#"+a.popoverName+"-wrapper").data("cssClass"));c.config.A.$(d.popover.$popover).find(".a-popover-header h4.a-popover-header-content").append(c.config.A.$(d.popover.$popover).find(".a-popover-inner .vse-lightbox-header-row-marker").addClass("vse-lightbox-header").removeClass("aok-hidden"));c.config.A.$(d.popover.$popover).find(".a-popover-header-secondary h4").text("").append(c.config.A.$(d.popover.$popover).find(".a-popover-inner .vse-lightbox-header-row-marker").clone().addClass("vse-lightbox-header").removeClass("aok-hidden"));
c.config.mShop&&c.config.$(d.popover.$popover).addClass("vse-lb-mshop");c.config.useSecondaryView&&c.dom.adjustLBPosition();c.config.mShop&&c.config.mShopFactory&&!c.config.showHeaderBar?(d={successCallback:function(){c.config.A.trigger("resize",{},{width:m.innerWidth,height:m.innerHeight});c.config.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})}},d.failCallback=c.handleFailFullScreen,c.config.mShopFactory.requestFullscreen(d)):c.config.A.trigger("resize",{},{width:m.innerWidth,height:m.innerHeight})});
this.config.mShop&&!this.config.showHeaderBar&&this.config.A.$(".vse-video-metadata").delegate("#vse-activevideo-crv-link","click",function(a){a.preventDefault();var b="";a.srcElement&&(b=a.srcElement.getAttribute("href"));a={successCallback:function(){c.config.A.trigger("resize",{},{width:m.innerWidth,height:m.innerHeight});m.location.href=b}};a.failCallback=c.handleFailFullScreen;c.config.mShopFactory.cancelFullscreen(a);c.config.mShopFactory.dispatchEvent({type:"appOverlays.Show"})});if(a.showProductCarousel){var d=
m.location.hostname;this.doRecordProductMetrics=a.recordProductMetrics||!1;-1!==d.indexOf("corp.amazon.com")?this.productCarouselAJAXEndpoint="https://development.amazon.com/vap/ew/":this.productCarouselAJAXEndpoint="/vap/ew/";this.productCarouselHtmlList=Array(this.config.contentCarousel.getplaylist().length);this.productCarouselInitList=Array(this.config.contentCarousel.getplaylist().length);this.config.$("#vseSectionToggleIcon").removeClass("a-icon-section-expand");this.config.$("#vseSectionToggleIcon").addClass("a-icon-section-collapse");
a.$(".vse-toggle-product-section").click(function(){return c.toggleProductCarouselSection()});a.A.on("vse:productCarousel:"+a.productCarouselId+":click",function(d){c.pauseVideoIfNeeded();c.doRecordProductMetrics&&(C.count(z.CLICK,1),d=c._buildProductDetailsMetrics(d,c.config.contentCarousel.getActiveAsset(),c.config.playerConfig),a.A.trigger("vse:productCarousel:"+a.productCarouselId+":productClickMetrics",d))})}this.config.showShareWidget&&(a.A.declarative(""+a.socialShareActionName,"click",function(c){c.$target.hasClass("active")?
a.A.trigger("vse:socialShare:"+a.socialShareId+"-show-icons:close"):a.A.trigger("vse:socialShare:"+a.socialShareId+"-show-icons:show");c.$target.toggleClass("active")}),this.registerSocialShare(a));this.registerFeedback(a);if(a.displayCarousel)a.A.on("vse:contentCarousel:"+a.carouselConfig.carouselName+":click",function(d){a.showShareWidget&&c.config.A.state.replace("vse-social-share",{pageLevelData:{clientRef:"lb",deviceTypeRef:c.config.isMobile?"mb":"dt"},url:"https://www.amazon.com/gp/product/"+
d.contentId,image:d.imageUrl,title:d.title,description:d.title});c.getPlayer(d).play(d);c.show(d);a.showProductCarousel&&(c.updateProductCarousel(d),c._adjustLightbox())})}a.prototype.startPlaying=function(a){this.isContinousPlayFinished=!1;this.getPlayer(a);this.config.popover.show();this.show(a);!this.config.mShop&&this.config.useSecondaryView||this.getPlayer(a).play(a);this.config.contentCarousel.changeStartingCardTo(a);this.config.showProductCarousel&&(this.config.carouselConfig||0!=this.productCarouselHtmlList.length||
0!=this.productCarouselInitList.length||(this.isSingleVideoCarousel=!0),this.updateProductCarousel(a),this._adjustLightbox());return this};a.prototype.show=function(a){this.activeASIN=a.contentId;this.config.contentCarousel.rotateTo(a);this.dom.update(a,this.config.contentTitle);return this};a.prototype.createPlaylist=function(a){this.playlist=a;return this};a.prototype.getCarousel=function(){return this.config.contentCarousel};a.prototype.hide=function(){this.destroyPlayer();this.config.popover.hide();
return this};a.prototype.handleFailFullScreen=function(){};a.prototype.hideIfPossible=function(){0==this.feedbackIsOpen&&1==this.isContinousPlayFinished&&this.hide()};a.prototype.getNextAsset=function(a){for(var c=0;c<this.playlist.length&&this.playlist[c].contentId!=a.contentId;c++);if(c!=this.playlist.length)return this.playlist[c+1]};a.prototype.pauseVideoIfNeeded=function(){this.player&&this.player.isPlaying()&&(this.player.pause(),this.lightboxPausedVideo=!0)};a.prototype.resumeVideoIfNeeded=
function(){this.player&&!this.player.isPlaying()&&!this.isContinousPlayFinished&&this.lightboxPausedVideo&&this.player.resume(Date.now());this.lightboxPausedVideo=!1};a.prototype.getPlayer=function(a){this.player||(a.eventTimestamp&&(this.config.playerConfig.eventTimestamp=a.eventTimestamp),this.config.playerConfig.initialVideo=a,this.player=this.config.awaFactory.create(this.config.playerConfig),this.player.on("playbackComplete",this.playbackCompleteHandler),this.player.on("playerLoaded",this.playerLoadedHandler),
this.player.on("playerFullScreen",this.playerFullScreenHandler));return this.player};a.prototype.destroyPlayer=function(){if(this.player){var a=this.player;this.player=null;a.off("playbackComplete",this.playbackCompleteHandler);a.off("playerLoaded",this.playerLoadedHandler);a.off("playerFullScreen",this.playerFullScreenHandler);a.destroy();null==this.player}};a.prototype.onPlaybackComplete=function(a){var c=this.getNextAsset(a);c?(this.config.showShareWidget&&this.config.A.state.replace("vse-social-share",
{pageLevelData:{clientRef:"lb",deviceTypeRef:this.config.isMobile?"mb":"dt"},url:"https://www.amazon.com/gp/product/"+c.contentId,image:c.imageUrl,title:c.title,description:c.title}),a.eventTimestamp&&(c.eventTimestamp=a.eventTimestamp),this.player.play(c),this.show(c),this.config.showProductCarousel&&(this.updateProductCarousel(c),this._adjustLightbox())):(this.isContinousPlayFinished=!0,this.hideIfPossible())};a.prototype.onPlayerFullScreen=function(a){var c=this.config.$("#"+this.config.popoverName+
"-wrapper"),d=this.config.$("."+this.lightBoxPopoverClass);c&&(a?(c.addClass("vse-player-fullscreen"),d.addClass("vse-lb-fullscreen")):(c.removeClass("vse-player-fullscreen"),d.removeClass("vse-lb-fullscreen")))};a.prototype.deRegisterFeedback=function(a){a.A.off("vse:feedback:"+a.feedbackId+"-show-options:show");a.A.off("vse:feedback:"+a.feedbackId+"-show-options:close");a.A.off("a:sheet:beforeShow:"+a.feedbackId+"-sheet");a.A.off("a:sheet:beforeHide:"+a.feedbackId+"-sheet");a.A.off("a:sheet:afterHide:"+
a.feedbackId+"-sheet");a.A.off("vse:feedback:"+a.feedbackId+":submit")};a.prototype.registerFeedback=function(a){var c=this;this.deRegisterFeedback(a);a.A.on("vse:feedback:"+a.feedbackId+"-show-options:show",function(){c.feedbackIsOpen=!0;c.config.showShareWidget&&c.socialShareIsOpen&&(c.socialShareIsOpen=!1,c.dom.hideShareIcons(a.socialShareId),c.config.A.$("#"+c.config.socialShareId+"-trigger").removeClass("active"));c.pauseVideoIfNeeded();c.feedback.show()});a.A.on("vse:feedback:"+a.feedbackId+
"-show-options:close",function(){c.feedbackIsOpen=!1;c.feedback.hide();c.hideIfPossible();c.resumeVideoIfNeeded()});a.A.on("a:sheet:beforeShow:"+a.feedbackId+"-sheet",function(){c.feedbackIsOpen=!0;c.pauseVideoIfNeeded()});a.A.on("a:sheet:beforeHide:"+a.feedbackId+"-sheet",function(){c.feedbackIsOpen=!1;c.feedback.reset();c.hideIfPossible();c.resumeVideoIfNeeded()});a.A.on("a:sheet:afterHide:"+a.feedbackId+"-sheet",function(){a.mShop&&a.mShopFactory&&!a.showHeaderBar&&a.A.delay(function(){a.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})},
500)});a.A.on("vse:feedback:"+a.feedbackId+":submit",function(d){a.$(a.feedbackId+"-trigger").toggleClass("active");c.feedbackIsOpen=!1;c.hideIfPossible();c.resumeVideoIfNeeded();c.feedback.submit({additionalComments:d.additionalComments,airyVersion:c.player?c.player.getVersion():"[Airy is not loaded.]",asin:c.config.playerConfig.requestMetadata.pageAsin,videoId:c.activeASIN?c.activeASIN:"",category:d.feedbackArea,rating:d.rating,url:document.location.href,userAgent:m.navigator.userAgent,feedbackTime:Date.now(),
customerId:c.config.playerConfig.customerId})})};a.prototype.deRegisterSocialShare=function(a){a.A.off("vse:socialShare:"+a.socialShareId+"-show-icons:show");a.A.off("vse:socialShare:"+a.socialShareId+"-show-icons:close")};a.prototype.registerSocialShare=function(a){var c=this;this.deRegisterSocialShare(a);a.A.on("vse:socialShare:"+a.socialShareId+"-show-icons:show",function(){c.feedbackIsOpen&&(c.feedbackIsOpen=!1,c.feedback.hide(),c.config.A.$("#"+c.config.feedbackId+"-trigger").removeClass("active"),
c.resumeVideoIfNeeded());c.socialShareIsOpen=!0;c.dom.showShareIcons(a.socialShareId)});a.A.on("vse:socialShare:"+a.socialShareId+"-show-icons:close",function(){c.socialShareIsOpen=!1;c.dom.hideShareIcons(a.socialShareId)})};a.prototype.updateProductCarousel=function(a){var c=this,d=this.config.playerConfig.customerId,e=this.config.playerConfig.requestMetadata.sessionId,f=this.config.playerConfig.requestMetadata.marketplaceId,g="#"+this.config.productCarouselId;if(this.config.mShop||this.config.useSecondaryView)this.config.$(g).addClass("aok-hidden"),
this.config.$("#vseToggleButton").addClass("aok-hidden"),this.initProductCarousel(a,d,e,f,!0).then(function(a){c.dom.updateProductCarouselDOM(a)?(c.doRecordProductMetrics&&C.count(z.IMPRESSION,1),c.config.$(g).removeClass("aok-hidden"),c.config.$("#vseToggleButton").removeClass("aok-hidden"),c.isToggledToCollapse||c.config.$(".vse-product-collapsible-section").slideDown(100,function(){return c._adjustLightbox()})):c.config.$(".vse-product-collapsible-section").slideUp(100,function(){return c._adjustLightbox()})})};
a.prototype.initProductCarousel=function(a,c,d,e,f){var g=this,h=this,l=f?"Mobile":"Desktop";return new Promise(function(f){var k=h.config.contentCarousel.findIndex(a);if(-1===k)if(h.isSingleVideoCarousel)k=0,0===g.productCarouselHtmlList.length&&(g.productCarouselHtmlList=Array(1),g.productCarouselInitList=Array(1));else{f("");return}var m={page:"RVP",placement:"VideoLightbox",device:l,customerId:c,sessionId:d,marketplaceID:e,video:{contentID:a.contentId,contentIDType:"ASIN"}};if(h.productCarouselInitList[k])f(h.productCarouselHtmlList[k]);
else{g.config.$("#vseSectionToggleIcon").hasClass("a-icon-section-expand")||g.config.$(".vse-product-collapsible-section").slideUp(100,function(){return g._adjustLightbox()});g.doRecordProductMetrics&&C.count(z.REQUEST,1);h.productCarouselInitList[k]=!0;var n=h.config.A.now();h.config.$.ajax({url:g.productCarouselAJAXEndpoint+"componentbuilder",data:JSON.stringify(m),crossDomain:!0,type:"POST",contentType:"application/json; charset\x3dutf-8",timeout:5E3}).done(function(a){if(g.doRecordProductMetrics){var b=
h.config.A.now()-n;C.count(z.TIME,b);C.count(z.SUCCESS_TIME,b);C.count(z.SUCCESS,1);a&&(b=g.dom.getProductCarouselSize(),0<b&&C.count(z.SIZE,b))}h.productCarouselHtmlList[k]=a;f(h.productCarouselHtmlList[k])}).fail(function(a,b){g.doRecordProductMetrics&&(a=h.config.A.now()-n,C.count(z.TIME,a),C.count(z.ERROR_TIME,a),C.count(z.ERROR,1),b===z.TIMEOUT_STATUS&&C.count(z.TIMEOUT,1));f("")})}})};a.prototype.toggleProductCarouselSection=function(){var a=this;this.config.$("#vseSectionToggleIcon").hasClass("a-icon-section-expand")?
(this.config.$(".vse-product-collapsible-section").slideDown(250,function(){return a._adjustLightbox()}),this.config.$("#vseSectionToggleIcon").removeClass("a-icon-section-expand"),this.config.$("#vseSectionToggleIcon").addClass("a-icon-section-collapse"),this.isToggledToCollapse=!1,this.updateProductCarousel(this.config.contentCarousel.getActiveAsset())):(this.config.$(".vse-product-collapsible-section").slideUp(250,function(){return a._adjustLightbox()}),this.config.$("#vseSectionToggleIcon").addClass("a-icon-section-expand"),
this.config.$("#vseSectionToggleIcon").removeClass("a-icon-section-collapse"),this.isToggledToCollapse=!0)};a.prototype._adjustLightbox=function(){this.dom.adjustLBPosition();this.dom.updateVerticalScrollHeight()};a.prototype._buildProductDetailsMetrics=function(a,c,d){return{events:[{data:{timestamp:new Date,videoWatchedAsin:c.contentId,originalPageAsin:d.requestMetadata.pageAsin,productClickedIndex:a.index,productClickedAsin:a.contentId,productClickedPrice:a.price,productClickedRating:a.rating,
productClickedReviews:a.reviews,productClickedPrimeEligibility:a.primeEligibility,widgetPosition:z.PLACEMENT,widgetid:this.config.productCarouselId,marketplaceid:d.requestMetadata.marketplaceId,sessionid:d.requestMetadata.sessionId,requestid:d.requestMetadata.requestId}}]}};return a}(),hd=function(){function a(){}a.prototype.markPlaying=function(a){};a.prototype.rotateTo=function(a){};a.prototype.changeStartingCardTo=function(a){};a.prototype.getplaylist=function(){return[]};a.prototype.getActiveAsset=
function(){return{}};a.prototype.findIndex=function(a){return-1};a.prototype.destroy=function(){};return a}(),tb=null;v.when("mash").execute(function(a){tb=a});var id={getMash:function(){return tb}},jd=function(){return function(a){this.name="InvalidArugmentsException";this.message=a}}(),kd=function(){function a(a){this.constructorConfig=a}a.prototype.create=function(a){var c=this.constructorConfig.modalFactory.get(this.constructorConfig.$("#"+a.popoverTriggerId)),d=a.useSecondaryView?this.constructorConfig.bottomSheetFactory:
null,e=a.mShop?id.getMash():null,f=this.constructorConfig.feedbackFactory.create(a.feedbackId||"");if(!c)throw new jd("Cannot create popover using name "+a.popoverName);var g=a.displayCarousel?this.constructorConfig.contentCarouselFactory.create(a.carouselConfig):new hd;return new gd({popoverName:a.popoverName,popoverTriggerId:a.popoverTriggerId,playerConfig:a.playerConfig,displayCarousel:a.displayCarousel,carouselConfig:a.carouselConfig,contentTitle:a.contentTitle,useSecondaryView:a.useSecondaryView,
displayActiveVideoDetails:a.displayActiveVideoDetails,popover:c,$:this.constructorConfig.$,contentCarousel:g,bottomSheetFactory:d,mShopFactory:e,feedback:f,feedbackId:a.feedbackId,productCarouselId:a.productCarouselId,awaFactory:this.constructorConfig.awaFactory,mShop:a.mShop,A:this.constructorConfig.A,feedbackEndpoint:a.feedbackEndpoint,showHeaderBar:a.showHeaderBar,showProductCarousel:a.showProductCarousel,recordProductMetrics:a.recordProductMetrics,featProductsUrl:a.featProductsUrl,showShareWidget:a.showShareWidget,
socialShareId:a.socialShareId,socialShareActionName:a.socialShareActionName,isMobile:a.isMobile})};return a}(),ld=Array.prototype.splice;F.prototype.clear=function(){this.__data__=[];this.size=0};F.prototype["delete"]=function(a){var b=this.__data__;a=ca(b,a);if(0>a)return!1;a==b.length-1?b.pop():ld.call(b,a,1);--this.size;return!0};F.prototype.get=function(a){var b=this.__data__;a=ca(b,a);return 0>a?void 0:b[a][1]};F.prototype.has=function(a){return-1<ca(this.__data__,a)};F.prototype.set=function(a,
b){var c=this.__data__,d=ca(c,a);0>d?(++this.size,c.push([a,b])):c[d][1]=b;return this};var ub="object"==typeof global&&global&&global.Object===Object&&global,md="object"==typeof self&&self&&self.Object===Object&&self,w=ub||md||Function("return this")(),E=w.Symbol,vb=Object.prototype,Lb=vb.hasOwnProperty,Mb=vb.toString,W=E?E.toStringTag:void 0,Nb=Object.prototype.toString,Ja=E?E.toStringTag:void 0,Aa=w["__core-js_shared__"],La=function(){var a=/[^.]+$/.exec(Aa&&Aa.keys&&Aa.keys.IE_PROTO||"");return a?
"Symbol(src)_1."+a:""}(),Ob=Function.prototype.toString,Qb=/^\[object .+?Constructor\]$/,Pb=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$\x26").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=K(w,"Map"),aa=K(Object,"create"),nd=Object.prototype.hasOwnProperty,od=Object.prototype.hasOwnProperty;M.prototype.clear=function(){this.__data__=aa?aa(null):{};this.size=0};M.prototype["delete"]=function(a){a=
this.has(a)&&delete this.__data__[a];this.size-=a?1:0;return a};M.prototype.get=function(a){var b=this.__data__;return aa?(a=b[a],"__lodash_hash_undefined__"===a?void 0:a):nd.call(b,a)?b[a]:void 0};M.prototype.has=function(a){var b=this.__data__;return aa?void 0!==b[a]:od.call(b,a)};M.prototype.set=function(a,b){var c=this.__data__;this.size+=this.has(a)?0:1;c[a]=aa&&void 0===b?"__lodash_hash_undefined__":b;return this};A.prototype.clear=function(){this.size=0;this.__data__={hash:new M,map:new (Z||
F),string:new M}};A.prototype["delete"]=function(a){a=da(this,a)["delete"](a);this.size-=a?1:0;return a};A.prototype.get=function(a){return da(this,a).get(a)};A.prototype.has=function(a){return da(this,a).has(a)};A.prototype.set=function(a,b){var c=da(this,a),d=c.size;c.set(a,b);this.size+=c.size==d?0:1;return this};I.prototype.clear=function(){this.__data__=new F;this.size=0};I.prototype["delete"]=function(a){var b=this.__data__;a=b["delete"](a);this.size=b.size;return a};I.prototype.get=function(a){return this.__data__.get(a)};
I.prototype.has=function(a){return this.__data__.has(a)};I.prototype.set=function(a,b){var c=this.__data__;if(c instanceof F){var d=c.__data__;if(!Z||199>d.length)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new A(d)}c.set(a,b);this.size=c.size;return this};ea.prototype.add=ea.prototype.push=function(a){this.__data__.set(a,"__lodash_hash_undefined__");return this};ea.prototype.has=function(a){return this.__data__.has(a)};var Na=w.Uint8Array,wb=E?E.prototype:void 0,na=wb?wb.valueOf:
void 0,B=Array.isArray,pd=Object.prototype.propertyIsEnumerable,xb=Object.getOwnPropertySymbols,Ua=xb?function(a){if(null==a)return[];a=Object(a);return Vb(xb(a),function(b){return pd.call(a,b)})}:Wb,yb=Object.prototype,qd=yb.hasOwnProperty,rd=yb.propertyIsEnumerable,Qa=Pa(function(){return arguments}())?Pa:function(a){return N(a)&&qd.call(a,"callee")&&!rd.call(a,"callee")},zb="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ab=zb&&"object"==typeof module&&module&&!module.nodeType&&module,
Bb=Ab&&Ab.exports===zb?w.Buffer:void 0,ra=(Bb?Bb.isBuffer:void 0)||Xb,Yb=/^(?:0|[1-9]\d*)$/,r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0;r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=
r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1;var Cb="object"==typeof exports&&exports&&!exports.nodeType&&exports,Db=Cb&&"object"==typeof module&&module&&!module.nodeType&&module,Ba=Db&&Db.exports===Cb&&ub.process,ka;a:{try{ka=Ba&&Ba.binding&&Ba.binding("util");break a}catch(a){}ka=void 0}var Eb=ka&&ka.isTypedArray,Ra=Eb?$b(Eb):Zb,ac=Object.prototype.hasOwnProperty,bc=Object.prototype,dc=function(a,
b){return function(c){return a(b(c))}}(Object.keys,Object),cc=Object.prototype.hasOwnProperty,ec=Object.prototype.hasOwnProperty,Ca=K(w,"DataView"),Da=K(w,"Promise"),Ea=K(w,"Set"),ba=K(w,"WeakMap"),sd=H(Ca),td=H(Z),ud=H(Da),vd=H(Ea),wd=H(ba),P=Q;if(Ca&&"[object DataView]"!=P(new Ca(new ArrayBuffer(1)))||Z&&"[object Map]"!=P(new Z)||Da&&"[object Promise]"!=P(Da.resolve())||Ea&&"[object Set]"!=P(new Ea)||ba&&"[object WeakMap]"!=P(new ba))P=function(a){var b=Q(a);if(a=(a="[object Object]"==b?a.constructor:
void 0)?H(a):"")switch(a){case sd:return"[object DataView]";case td:return"[object Map]";case ud:return"[object Promise]";case vd:return"[object Set]";case wd:return"[object WeakMap]"}return b};var Sa=P,Ta=Object.prototype.hasOwnProperty,jc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ic=/^\w*$/;ta.Cache=A;var xd=/^\./,yd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zd=/\\(\\)?/g,lc=function(a){a=ta(a,function(a){500===b.size&&b.clear();
return a});var b=a.cache;return a}(function(a){var b=[];xd.test(a)&&b.push("");a.replace(yd,function(a,d,e,f){b.push(e?f.replace(zd,"$1"):d||a)});return b}),kc=1/0,Fb=E?E.prototype:void 0,Xa=Fb?Fb.toString:void 0,mc=1/0,Ad=function(a){return function(b,c,d){var e=-1,f=Object(b);d=d(b);for(var g=d.length;g--;){var h=d[a?g:++e];if(!1===c(f[h],h,f))break}return b}}(),ab=function(a,b){return function(c,d){if(null==c)return c;if(!qa(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=Object(c);(b?f--:++f<e)&&
!1!==d(g[f],f,g););return c}}(function(a,b){return a&&Ad(a,b,fa)}),Bd=function(){function a(a,c){var d=this;this.sectionId=c;a.A.declarative(a.id+"-"+c+"-choose","click",function(e){e.$event.stopPropagation();d.selected=e.$target;d.buttons.enable();d.selected.closest(".a-radio").hasClass(a.id+"-"+c+"-choose-other")?d.freeText.show():e.$target.parent().hasClass(a.id+"-"+c+"-text")||(d.freeText.val(""),d.freeText.hide())});this.buttons=a.buttonApi("#"+a.id+"-"+c+"-button-primary");this.choices=a.buttonApi(a.id+
"-"+c);this.freeText=a.A.$("#"+a.id+"-"+c+"-content textarea")}a.prototype.reset=function(){this.selected.prop("checked",!1);this.buttons.disable();this.freeText.val("")};a.prototype.show=function(){return this};a.prototype.hide=function(){this.reset();return this};return a}(),Cd=function(){function a(a){var c=this;this.config=a;this.payload={};this.registered=!1;this.ratingMap={"The video content is inappropriate":"inappropriate content","The video content is misleading":"misleading content","Other content-related feedback":"content other",
"The ad is too long":"ads are too long","The ad does not play":"ad did not play","The ad does not inform my purchase":"ad did not inform purchase","Other ad-related feedback":"ad other","The video does not play":"unplayable video","There is too much buffering":"too much buffering","The audio is poor or missing":"poor audio","Other technical issue":"technical other","Video is unrelated to the product":"inaccurate related items appear","Other product-related feedback":"product other"};this.A=a.A;this.id=
a.id;this.endpoint=a.feedbackEndpoint;var d=this,e=""+this.id;rc(this.A.$("input[name\x3d"+e+"-options]:not(:checked)"),function(c){new Bd(a,d.A.$(c).attr("value"))});this.buttonApi=a.buttonApi;this.registered||(this.A.declarative(e+"-options-choose","click",function(a){(a=a.$target.prop("value"))&&c.showSection(a)}),this.A.declarative(this.id+"-cancel","click",function(){return c.reset()}),this.A.declarative(this.id+"-submit","click",function(){return c.submitFeedback()}),this.registered=!0)}a.prototype.showSection=
function(a){this.A.trigger("vse:feedback:"+this.id+":showSection");this.activeSection&&this.A.$(this.activeSection).attr("id")!==this.id+"-"+a+"-content"&&this.clearForm();this.activeButtons=this.buttonApi("#"+this.id+"-"+a+"-button-primary");this.activeSection=this.A.$("#"+this.id+"-"+a+"-content").slideDown("fast");this.activeButtonSection=this.A.$("#"+this.id+"-"+a+"-buttons").removeClass("aok-hidden");this.activeText=this.A.$("#"+this.id+"-"+a+"-content textarea")};a.prototype.submitFeedback=
function(){var a=this.activeSection?this.activeSection.find('input[type\x3d"radio"]:checked').siblings(".a-radio-label").text():"",a=this.ratingMap[a]||"";this.A.trigger("vse:feedback:"+this.id+":submit",{additionalComments:this.activeText?this.activeText.val():"",feedbackArea:this.activeSection?this.activeSection.prev("[data-a-input-name\x3d"+this.id+"-options]").data("feedback-field-value"):"",rating:a});this.clearForm()};a.prototype.reset=function(){this.clearForm();this.A.trigger("vse:feedback:"+
this.id+":reset");return this};a.prototype.clearForm=function(){this.activeButtonSection&&this.activeButtonSection.addClass("aok-hidden");this.activeButtons&&this.activeButtons.disable();this.activeText&&(this.activeText.val(""),this.activeText.hide());this.activeSection&&(this.activeSection.slideUp(),this.activeSection.find('input[type\x3d"radio"]:checked').each(function(a,c){this.checked=!1}),this.activeSection.prev().find('input[type\x3d"radio"]:checked').each(function(a,c){this.checked=!1}));
return this};a.prototype.hide=function(){return this};return a}(),Dd=function(){function a(a){this.config=a;this.feedbackWidgets={}}a.prototype.create=function(a){var c=this.feedbackWidgets[a]||new Cd(this.createFeedbackConfig(a));return this.feedbackWidgets[a]=c};a.prototype.get=function(a){return this.feedbackWidgets[a]};a.prototype.createFeedbackConfig=function(a){return{A:this.config.A,dropdownApi:this.config.dropdownApi,buttonApi:this.config.buttonApi,feedbackEndpoint:this.config.feedbackEndpoint,
id:a}};return a}(),bb=Math.max,la=function(){try{var a=K(Object,"defineProperty");a({},"",{});return a}catch(b){}}(),uc=Date.now,hb=cb(la?function(a,b){return la(a,"toString",{configurable:!0,enumerable:!1,value:tc(b),writable:!0})}:ia),ma=ba&&new ba,Gb=ma?function(a,b){ma.set(a,b);return a}:ia,Hb=Object.create,va=function(){function a(){}return function(b){if(!G(b))return{};if(Hb)return Hb(b);a.prototype=b;b=new a;a.prototype=void 0;return b}}(),wc=Math.max,xc=Math.max;S.prototype=va(wa.prototype);
S.prototype.constructor=S;var kb=ma?function(a){return ma.get(a)}:yc,jb={},Gc=Object.prototype.hasOwnProperty;T.prototype=va(wa.prototype);T.prototype.constructor=T;var zc=Object.prototype.hasOwnProperty;ja.prototype=wa.prototype;ja.prototype.constructor=ja;var lb=cb(Gb),Dc=/\{\n\/\* \[wrapped with (.+)\] \*/,Ec=/,? & /,Fc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Cc=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],
Hc=Math.min,Ed=Math.min,nb=0/0,Mc=/^\s+|\s+$/g,Qc=/^[-+]0x[0-9a-f]+$/i,Nc=/^0b[01]+$/i,Oc=/^0o[0-7]+$/i,Pc=parseInt,pb=1/0,Ib=Math.max,Fa=function(a,b){return hb(sc(a,b,ia),a+"")}(function(a,b){var c=Y(b,Fa.placeholder),d=a,e=32,f=void 0,g=b,h=c,l=void 0,m=void 0;b=e&2;if(!b&&"function"!=typeof d)throw new TypeError("Expected a function");a=g?g.length:0;a||(e&=-97,g=h=void 0);l=void 0===l?l:Ib(ob(l),0);m=void 0===m?m:ob(m);a-=h?h.length:0;if(e&64)var k=g,q=h,g=h=void 0;c=b?void 0:kb(d);k=[d,e,f,g,
h,k,q,void 0,l,m];if(c&&(f=k[1],d=c[1],e=f|d,q=128==d&&8==f||128==d&&256==f&&k[7].length<=c[8]||384==d&&c[7].length<=c[8]&&8==f,131>e||q)){d&1&&(k[2]=c[2],e|=f&1?0:4);if(f=c[3])q=k[3],k[3]=q?db(q,f,c[4]):f,k[4]=q?Y(k[3],"__lodash_placeholder__"):c[4];if(f=c[5])q=k[5],k[5]=q?eb(q,f,c[6]):f,k[6]=q?Y(k[5],"__lodash_placeholder__"):c[6];(f=c[7])&&(k[7]=f);d&128&&(k[8]=null==k[8]?c[8]:Ed(k[8],c[8]));null==k[9]&&(k[9]=c[9]);k[0]=c[0];k[1]=e}d=k[0];e=k[1];f=k[2];g=k[3];h=k[4];m=k[9]=void 0===k[9]?b?0:d.length:
Ib(k[9]-a,0);!m&&e&24&&(e&=-25);b=e&&1!=e?8==e||16==e?Jc(d,e,m):32!=e&&33!=e||h.length?xa.apply(void 0,k):Kc(d,e,f,g):vc(d,e,f);return gb((c?Gb:lb)(b,k),d,e)});Fa.placeholder={};var Fd=function(a,b){return function(c,d){var e=B(c)?Rc:Sc,f=b?b():{};return e(c,a,$a(d,2),f)}}(function(a,b,c){"__proto__"==c&&la?la(a,c,{configurable:!0,enumerable:!0,value:b,writable:!0}):a[c]=b}),Jb=1,Hd=function(a){function b(a,b){if(m.ue)try{m.ue.count(a,b)}catch(c){m.ueLogError&&m.ueLogError(c,{logLevel:"ERROR",attribution:"vse-related-video-shorts-metrics",
message:"Failed to log CSM level metric."})}}function c(a){if(!(0>k)){var c=h[a].getPosition()-k;k=-1;2<=c&&(b("vse:rvs:ma:viewable",1),0<=a&&3>a?b("vse:rvs:ma:viewable:"+(a+1),1):b("vse:rvs:ma:viewable:x",1))}}function d(a){l[a]&&(h[a].pause(),l[a]=!1,c(a))}function e(a){if(!l[a]){var b=h[a];l[a]=!0;k=b.getPosition();p=Date.now();b.play()}}function f(){if(!(0>p)){var a=q?"vse:rvs:ma:scroll:ptff":"vse:rvs:ma:swipe:ptff",c=Date.now()-p;b(a,c);q=!1;p=-1}}function g(a,b){var c=a.$(m);a=c.scrollTop();
var c=a+c.height(),d=b.offset().top;return d+b.height()<=c&&d>=a}var h=[],l=[],p=-1,k=-1,q=!0;return new a(function(a,k){v.when("A").register("VSE-RVS-client",function(k){var l=!0,p=null,r=null,u=function(a,c,e,f){p&&k.off(p);r&&k.off(r);r=k.on("a:popover:beforeHide:"+c.popoverName,function(a){f.destroy()});p=k.on("vse:contentCarousel:"+a.carouselName+":click",function(f){for(var g=e.getCarousel().getplaylist(),l=0;l<g.length;l++){if(g[0].contentId==f.contentId){a.autoplay&&"undefined"!==typeof h[l]&&
d(l);break}g.push(g.shift())}c.showShareWidget&&k.state.replace("vse-social-share",{pageLevelData:{clientRef:"lb",deviceTypeRef:c.isMobile?"mb":"dt"},url:"https://www.amazon.com/gp/product/"+f.contentId,image:f.imageUrl,title:f.title,description:f.title});b("vse:rvs:widget:click",1);a.autoplayTriggered&&b("vse:rvs:ma:widget:click",1);e.createPlaylist(g);e.startPlaying(f)});k.on("vse:productCarousel:"+c.productCarouselId+":productClickMetrics",function(a){C.emitSushiMetric(a,c.featProductsUrl)})};
return{preLoadAiry:function(a){if(l)try{var b=a.state("vse-dp-vl-config");if(b){var c=b.playerConfig,d=c.container||document.getElementById(c.containerId),e=document.createElement("iframe");e.className="vse-airy-preload-assets";if(d){d.appendChild(e);if("3"==c.airyVersion){var f=c.airy3ScriptUrl||"https://d2tz3plrpnfrv0.cloudfront.net/airy/prod/latest/airy.min.js";e.contentWindow.document.open();e.contentWindow.document.write('\x3cbody\x3e\n                        \x3cscript crossorigin\x3d"anonymous" src\x3d"'+
f+'"\x3e\x3c/script\x3e\n                        \x3cscript crossorigin\x3d"anonymous" src\x3d"https://avodassets-a.akamaihd.net/playback/web_player/webplayer.js"\x3e\x3c/script\x3e\n                     \x3c/body\x3e')}else{var g=c.airy2Version;a="https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+g+"/js/airy.ads._TTW_.js";var h=b.useSecondaryView?"https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+g+"/css/aries._TTW_.css":"https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2/prod/"+
g+"/css/beacon._TTW_.css",k=b.useSecondaryView?"https://images-na.ssl-images-amazon.com/images/G/01/vap/video/airy2//prod/"+g+"/skins/aries._TTW_.js":"";e.contentWindow.document.open();e.contentWindow.document.write('\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+h+'" /\x3e\n                         \x3cbody\x3e\n                             \x3cscript crossorigin\x3d"anonymous" src\x3d"'+a+'"\x3e\x3c/script\x3e\n                             \x3cscript crossorigin\x3d"anonymous" src\x3d"'+
k+'"\x3e\x3c/script\x3e\n                         \x3c/body\x3e')}e.contentWindow.document.close();e&&e.classList&&e.classList.add("aok-hidden");l=!1}else l=!0}else l=!0}catch(n){m.ueLogError&&m.ueLogError(n,{logLevel:"ERROR",attribution:"vse-related-video-shorts-videoplayer-preload",message:"Failed to create the preload element."})}},initializeClient:function(a,k,l,n,p,r,v,x){try{a.$("#va-related-videos-widget_feature_div").removeClass("aok-hidden");a.$("#vse-spinner").removeClass("aok-hidden");
a.state.replace("vse-dp-rv-config",JSON.parse(a.$("script[type\x3d'a-state'][data-a-state*\x3dvse-dp-rv-config]").html()));a.state.replace("vse-dp-vl-config",JSON.parse(a.$("script[type\x3d'a-state'][data-a-state*\x3dvse-dp-vl-config]").html()));var t=a.state("vse-dp-rv-config"),w=a.state("vse-dp-vl-config");if(w&&t&&0!=w.length&&0!=t.length){r={gatedP:sb,_partial:Fa,_keyBy:Fd,EventEmitter:$c,Promise:r};var z=new dd(k,a,r),B=new Zc(r),C=new Dd({A:a,dropdownApi:n,buttonApi:p,feedbackEndpoint:""}),
D=(new kd({modalFactory:l,contentCarouselFactory:z,$:a.$,A:a,feedbackFactory:C,awaFactory:B,bottomSheetFactory:v})).create(w),F=z.create(t),A=F.getplaylist();if(1<=A.length&&t.autoplay){var I=function(b,c){var d=a.$.extend({},w.playerConfig);b=b[c];var e="vse-rvs-ingress-player-"+(c+1);var g=d.requestMetadata;g.method&&(g.method=g.method.replace("vse_lb","vse_rvs"));d.initialVideo=b;d.containerId=e;d.shouldStartMuted=!0;d.shouldDisableControls=!0;d.airyVersion="VideoJS";a.$("#"+e).find("img").hide();
a.$("#"+e).find("p").hide();h[c]=B.create(d);h[c].on("playbackStart",f);a.$("#"+e+"-container").after("\x3cdiv class \x3d 'vse-rvp-overlap-player'\x3e\x3c/div\x3e\x3cimg class\x3d'vser-rvp-animated-equalizer' src\x3dhttps://m.media-amazon.com/images/G/01/vse/Discovery/audio_indicator_1x._CB495544923_.gif /\x3e")};for(k=0;k<Math.min(2,A.length);k++)I(A,k);var G=0,L=0,E=!1;a.$(m).unload(function(){c(L)});var H=a.$("#vse-rvs-ingress-player-1");a.on("a:carousel:"+t.carouselName+":getCarouselPageNumber",
function(c){G=L;L=c-1;if(g(a,H)){d(G);e(L);if(L>G)for(c=1;2>=c;c++){var f=L+c;f<A.length&&"undefined"===typeof h[f]&&I(A,f)}b("vse:rvs:ma:widget:swipe",1)}});a.on.scroll(function(){var c="#vse-rvs-ingress-player-"+(L+1);"undefined"===typeof H||a.$(c).closest("li").hasClass("active")||(!E&&g(a,H)?(q=E=!0,e(L),b("vse:rvs:ma:widget:view",1)):E&&!g(a,H)&&(E=!1,d(L)))})}u(t,w,D,F);var D=Jb-x,K=a.now()-x;b("vse:csm:vse-rel-videos-carousel:loadedNotRegistered:time",D);b("vse:csm:vse-rel-videos-carousel:loadedAndRegistered:time",
K);a.$("#vse-spinner").addClass("aok-hidden");b("vse:rvs:page:view",1);t.autoplayTriggered&&b("vse:rvs:ma:page:view",1)}}catch(Gd){a.$("#va-related-videos-widget_feature_div").addClass("aok-hidden"),m.ueLogError&&m.ueLogError(Gd,{logLevel:"FATAL",attribution:"vse-related-video-shorts",message:"Failed to create the video lightbox experience."})}},_noneFeature:a()}})})};v.when("A","3p-promise").execute("VSE-gatedP-register-client",function(a,b){Jb=a.now();sb.register("VSE-RVS-client","VSE-RVS-client-registered",
Hd,b)})})()});